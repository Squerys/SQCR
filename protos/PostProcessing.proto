syntax = "proto3";

import "Math.proto";
import "Options.proto";

message PostProcessingSettings {
    Exposure exposure = 1;
    message Exposure {
        bool enableAutoExposure = 1;
        bool ev100FromCameraSettings = 2;
        float exposureCompensation = 3;
        float minBrightness = 4;
        float maxBrightness = 5;
        float lowPercentage = 6;
        float highPercentage = 7;
        float speedUp = 8;
        float speedDown = 9;
        Vector2Data histogramLogLuminanceRange = 10;
        Quality quality = 11;
        
        CameraModeSelector autoExposureSkipTheFocusedCar = 12;
        message CameraModeSelector {
            bool cameraModeFree = 1;
            bool cameraModeDrivableInternal = 2;
            bool cameraModeDrivableExternal = 3;
            bool cameraModeOnboard = 4;
            bool cameraModeTV = 5;
            bool cameraModeShowroom = 6;
            bool cameraModeHelicopter = 7;
        }
    }
    
    Tonemapper tonemapper = 2;
    message Tonemapper {
        float black_level = 2;
        float white_level = 3;
        float mid_section_start = 4;
        float mid_section_length = 5;
        float contrast = 6;
        
        reserved 1;
    }
    
    ColorGrading colorGrading = 3;
    message ColorGrading {
        WhiteBalance whiteBalance = 1;
        ColorCorrection master = 2;
        ColorCorrection shadows = 3;
        ColorCorrection midtones = 4;
        ColorCorrection highlights = 5;
        ColorCorrectionRange colorCorrectionRange = 6;
        PathToWhite pathToWhite = 7;
    }
    
    EyeParametrization eyeParameters = 27;
    message EyeParametrization {
        bool eyeFocusVignette = 1;
        float eyeFocusPow = 2;
        float eyeFocusIntensity = 3;
    }
    
    DepthOfField depthOfField = 28;
    message DepthOfField {
        bool enable = 1;
        float aperture = 4;
        float foregroundBlur = 5;
        float backgroundBlur = 6;
        float cocDepthRadius = 2;
        int32 cocSampleCount = 3;
        float backgroundDistance = 7;
        float foregroundDistance = 8;
        bool explicitFocusDistance = 9;
        float focusDistanceOverride = 10;
        bool explicitFocusCenter = 11;
        Vector2Data focusCenter = 12;
    }
    
    LensEffect lensEffect = 29;
    message LensEffect {
        float vignette_intensity = 1;
        float vignette_radius = 2;
        float chromatic_aberration = 3;
        float fisheye_strength = 4;
    }
    
    DynamicSettings dynamicSettings = 23;
    message DynamicSettings {
        Exposure exposure = 1;
        message Exposure {
            OptionalCurve exposureCompensationBySunAngle = 3;
            OptionalCurve multiplicativeExposureCompensationByGloominess = 6;
            OptionalCurve minBrightnessBySunAngle = 4;
            OptionalCurve maxBrightnessBySunAngle = 5;
        }
        
        ColorGrading colorGrading = 3;
        message ColorGrading {
            WhiteBalance whiteBalance = 1;
            ColorCorrection master = 2;
            ColorCorrection2 shadows = 3;
            ColorCorrection2 midtones = 4;
            ColorCorrection2 highlights = 5;
        }
        
        message OptionalCurve {
            string curvePath = 1;
        }
        
        message OptionalCurve4 {
            string curvePath = 1;
        }
        
        message WhiteBalance {
            OptionalCurve temperatureBySunAngle = 1;
            OptionalCurve additiveTemperatureBySunAngle = 3;
            OptionalCurve tintBySunAngle = 2;
        }
        
        message ColorCorrection {
            OptionalCurve4 gammaBySunAngle = 13;
            OptionalCurve4 additiveGammaByGlominess = 16;
            OptionalCurve4 gainBySunAngle = 14;
            OptionalCurve4 saturationBySunAngle = 15;
            OptionalCurve4 additiveContrastByGlominess = 17;
            
            reserved 3, 4;
        }
        
        message ColorCorrection2 {
            OptionalCurve4 gainBySunAngle = 14;
            OptionalCurve4 additiveGainByGlominess = 15;
        }
    }
    
    reserved 7 to 22;
    
    message WhiteBalance {
        float temperature = 1;
        float tint = 2;
    }
    
    message ColorCorrection {
        Vector4Data saturation = 1;
        Vector4Data contrast = 2;
        Vector4Data gamma = 3;
        Vector4Data gain = 4;
        Vector4Data offset = 5;
    }
    
    message ColorCorrectionRange {
        float maxShadowsRange = 1;
        float minHighlightsRange = 2;
    }
    
    message PathToWhite {
        float pathToWhite = 1;
        float overExposeSaturation = 2;
    }
    
    enum Quality {
        Quality_Low = 0;
        Quality_Medium = 1;
        Quality_High = 2;
        Quality_Ultra = 3;
    }
    
    enum Resolution {
        Resolution_Quarter = 0;
        Resolution_Half = 1;
    }
}
