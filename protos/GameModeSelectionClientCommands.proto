syntax = "proto3";

import "ClientCommandsUtil.proto";
import "LogicScene.proto";
import "Gameplay.proto";
import "Weather.proto";
import "Customization.proto";
import "DriverManager.proto";

message TrackItem {
    string continent = 8;
    string nation = 1;
    string name = 2;
    string layout = 3;
    string event_name = 6;
    string image_path = 4;
    int32 max_drivers = 5;
    bool is_enabled = 7;
    int32 track_length = 9;
    bool is_for_development = 10;
}

message LastGameMode {
    GameModeType type = 1;
    GameModeSelectionWeatherType weather_type = 2;
    repeated GameModeWeatherData weather_data = 3;
}

message GameModeSave {
    GameModeType type = 2;
    repeated GameModeSelectionSession sessions = 3;
    
    reserved 1;
}

message CustomGrid {
    repeated CarModel models = 1;
    repeated OpponentsContentData opponents = 2;
    GameModeSelectionClientRequestOpponents opponents_request = 3;
    int32 pool_size = 4;
}

message GameModeSelectionTimeOfDay {
    int32 year = 1;
    int32 month = 2;
    int32 day = 3;
    int32 hour = 4;
    int32 minute = 5;
    int32 second = 6;
    float time_multiplier = 7;
}

message GameModeSelectionOpponentChoice {
    float weight = 2;
    
    reserved 1;
}

message GameModeSelectionSession {
    string name = 1;
    string description = 14;
    int32 duration = 2;
    int32 max_duration_time = 16;
    GameModeSelectionDuration duration_type = 3;
    GameModeSelectionTimeOfDay time_of_day = 4;
    TrackItem track_item = 5;
    GameModeSelectionGridType grid_type = 6;
    int32 num_opponents = 7;
    int32 min_strength = 30;
    int32 max_strength = 31;
    AiDriverData.AggressivnessCategory aggressivness = 32;
    repeated CarModel models = 10;
    repeated OpponentsContentData opponents = 11;
    repeated CarFinalStateData opponents_car = 15;
    bool single_make = 12;
    repeated bool class_filter = 23;
    float player_pi = 17;
    float min_pi = 18;
    float max_pi = 19;
    float min_evo_pi = 20;
    float max_evo_pi = 21;
    int32 starting_position = 22;
    
    reserved 8;
}

message GameModeWeatherData {
    GameModeSelectionWeatherType type = 1;
    GameModeSelectionWeatherBehaviour behaviour = 2;
    WeatherData weather_data = 3;
    WeatherNoiseData noise_data = 4;
    DynamicWeatherData dynamic_weather_data = 5;
    InitialGrip initial_grip = 6;
}

message GameModeSpecialEvent {
    string event_guid = 1;
    GameModeType type = 2;
    uint32 duration = 3;
    GameModeSelectionDuration duration_type = 4;
    GameModeSelectionTimeOfDay time_of_day = 5;
    CarModel car_model = 6;
    TrackItem track_item = 7;
    GameModeSelectionWeatherType weather_preset = 8;
    InitialGrip initial_grip = 9;
    string name = 10;
    string img_path = 11;
    SpecialEventStatus status = 12;
    uint32 player_position = 33;
    uint32 player_count = 34;
    uint32 event_index = 25;
    string golden_time = 20;
    string silver_time = 21;
    string bronze_time = 22;
    string my_time = 23;
    uint32 my_medal = 24;
    uint32 my_attempts = 32;
    uint32 golden_reward_money = 26;
    uint32 silver_reward_money = 27;
    uint32 bronze_reward_money = 28;
    uint32 golden_reward_xp = 29;
    uint32 silver_reward_xp = 30;
    uint32 bronze_reward_xp = 31;
}

message GameModeSpecialEventResult {
    int32 position = 1;
    string driver = 2;
    string time = 3;
    int32 total_laps = 4;
}

message GameModeSelectionClientRequestSetGameType {
    ClientCommandsMode mode = 2;
    GameModeType type = 3;
}

message GameModeSelectionClientResponseSetGameType {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    GameModeType type = 3;
}

message GameModeSelectionClientRequestGameModeParameters {
    reserved 1, 2;
}

message GameModeSelectionClientResponseGameModeParameters {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    GameModeType type = 3;
    ClientCommandsMode ui_mode = 7;
    GameModeType ui_type = 8;
    repeated GameModeSelectionSession sessions = 4;
    GameModeSelectionWeatherType weather_type = 5;
    repeated GameModeWeatherData weather_data = 6;
    repeated bool user_class_filter = 9;
    float user_min_pi = 10;
    float user_max_pi = 11;
    int32 pool_cars = 12;
}

message GameModeSelectionClientRequestSetGameModeParameters {
    ClientCommandsMode mode = 2;
    repeated GameModeSelectionSession sessions = 10;
    
    reserved 1;
}

message GameModeSelectionClientResponseSetGameModeParameters {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    repeated GameModeSelectionSession sessions = 10;
}

message GameModeSelectionClientRequestStart {
    ClientCommandsMode mode = 2;
}

message GameModeSelectionClientResponseStart {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
}

message GameModeSelectionClientRequestSpecialEvents {
    
}

message GameModeSelectionClientResponseSpecialEvents {
    ClientCommandsResponse response = 1;
    repeated GameModeSpecialEvent special_events = 10;
}

message GameModeSelectionClientRequestSpecialEventResults {
    string event_guid = 3;
    int32 num_results = 4;
}

message GameModeSelectionClientResponseSpecialEventResults {
    ClientCommandsResponse response = 1;
    repeated GameModeSpecialEventResult rows = 3;
    GameModeSpecialEventResult driver_row = 4;
}

message GameModeSelectionClientRsponseDrivingAcademyCategory {
    string name = 1;
    LicenseType license_type = 2;
    LicenseType license_requested = 3;
    bool enabled = 4;
    repeated GameModeSpecialEvent special_events = 10;
}

message GameModeSelectionClientRequestDrivingAcademy {
    
}

message GameModeSelectionClientResponseDrivingAcademy {
    ClientCommandsResponse response = 1;
    repeated GameModeSelectionClientRsponseDrivingAcademyCategory categories = 10;
}

message GameModeSelectionClientRequestJoinSpecialEvent {
    string event_guid = 1;
}

message GameModeSelectionClientResponseJoinSpecialEvent {
    ClientCommandsResponse response = 1;
    string event_guid = 2;
}

message GameModeSelectionClientRequestJoinDrivingAcademy {
    string event_guid = 1;
}

message GameModeSelectionClientResponseJoinDrivingAcademy {
    ClientCommandsResponse response = 1;
    string event_guid = 2;
}

message GameModeSelectionClientRequestTestDrive {
    CarModel model = 1;
}

message GameModeSelectionClientResponseTestDrive {
    ClientCommandsResponse response = 1;
}

message GameModeSelectionClientRequestGoBack {
    GameModeSelectionGoBackFrom go_back_from = 1;
}

message GameModeSelectionClientResponseGoBack {
    ClientCommandsResponse response = 1;
}

message GameModeSelectionClientRequestOpponents {
    int32 num_opponents = 1;
    bool single_make = 2;
    repeated bool class_filter = 5;
    AiDriverData.AggressivnessCategory aggressivness_category = 20;
    int32 min_strength = 21;
    int32 max_strength = 22;
    float min_pi = 23;
    float max_pi = 24;
}

message GameModeSelectionClientResponseOpponents {
    ClientCommandsResponse response = 1;
    repeated CarModel models = 2;
    repeated OpponentsContentData opponents = 4;
    repeated CarModel all_ai_models = 3;
    repeated OpponentsContentData all_opponents = 5;
}

message GameModeSelectionClientRequestWeatherData {
    
}

message GameModeSelectionClientResponseWeatherData {
    ClientCommandsResponse response = 1;
    repeated GameModeWeatherData weather_data = 2;
}

message GameModeSelectionClientRequestSetWeather {
    GameModeWeatherData weather_data = 2;
}

message GameModeSelectionClientResponseSetWeather {
    ClientCommandsResponse response = 1;
}

message GameModeSelectionClientRequestCurrentTrack {
    ClientCommandsMode mode = 1;
}

message GameModeSelectionClientResponseCurrentTrack {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    TrackItem track_item = 10;
}

message GameModeSelectionClientRequestTrackList {
    ClientCommandsMode mode = 1;
}

message GameModeSelectionClientResponseTrackList {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    repeated TrackItem track_item = 10;
}

message GameModeSelectionClientRequestSetTrack {
    ClientCommandsMode mode = 1;
    TrackItem track_item = 10;
}

message GameModeSelectionClientResponseSetTrack {
    ClientCommandsResponse response = 1;
    ClientCommandsMode mode = 2;
    TrackItem track_item = 10;
}

message GameModeSelectionClientRequestOpenWorld {
    bool im_empty = 1;
}

message GameModeSelectionClientResponseOpenWorld {
    bool im_empty = 1;
}

message GameModeSelectionClientCommands {
    GameModeSelectionClientRequestSetGameType request_set_game_type = 1;
    GameModeSelectionClientResponseSetGameType response_set_game_type = 1000;
    GameModeSelectionClientRequestGameModeParameters request_game_mode_parameters = 2;
    GameModeSelectionClientResponseGameModeParameters response_game_mode_parameters = 1001;
    GameModeSelectionClientRequestSetGameModeParameters request_set_game_mode_parameters = 3;
    GameModeSelectionClientResponseSetGameModeParameters response_set_game_mode_parameters = 1002;
    GameModeSelectionClientRequestStart request_start = 4;
    GameModeSelectionClientResponseStart response_start = 1003;
    GameModeSelectionClientRequestSpecialEvents request_special_events = 5;
    GameModeSelectionClientResponseSpecialEvents response_special_events = 1004;
    GameModeSelectionClientRequestSpecialEventResults request_special_event_results = 6;
    GameModeSelectionClientResponseSpecialEventResults response_special_event_results = 1005;
    GameModeSelectionClientRequestDrivingAcademy request_driving_academy = 7;
    GameModeSelectionClientResponseDrivingAcademy response_driving_academy = 1006;
    GameModeSelectionClientRequestJoinSpecialEvent request_join_special_event = 8;
    GameModeSelectionClientResponseJoinSpecialEvent response_join_special_event = 1007;
    GameModeSelectionClientRequestJoinDrivingAcademy request_join_driving_academy = 9;
    GameModeSelectionClientResponseJoinDrivingAcademy response_join_driving_academy = 1008;
    GameModeSelectionClientRequestTestDrive request_test_drive = 10;
    GameModeSelectionClientResponseTestDrive response_test_drive = 1009;
    GameModeSelectionClientRequestGoBack request_go_back = 11;
    GameModeSelectionClientResponseGoBack response_go_back = 1010;
    GameModeSelectionClientRequestOpponents request_opponents = 12;
    GameModeSelectionClientResponseOpponents response_opponents = 1011;
    GameModeSelectionClientRequestWeatherData request_weather_data = 13;
    GameModeSelectionClientResponseWeatherData response_weather_data = 1012;
    GameModeSelectionClientRequestSetWeather request_set_weather = 14;
    GameModeSelectionClientResponseSetWeather response_set_weather = 1013;
    GameModeSelectionClientRequestCurrentTrack request_current_track = 15;
    GameModeSelectionClientResponseCurrentTrack response_current_track = 1014;
    GameModeSelectionClientRequestTrackList request_track_list = 16;
    GameModeSelectionClientResponseTrackList response_track_list = 1015;
    GameModeSelectionClientRequestSetTrack request_set_track = 17;
    GameModeSelectionClientResponseSetTrack response_set_track = 1016;
    GameModeSelectionClientRequestOpenWorld request_open_world = 18;
    GameModeSelectionClientResponseOpenWorld response_open_world = 1017;
}

enum GameModeSelectionDuration {
    GameModeSelectionDuration_NONE = 0;
    GameModeSelectionDuration_TIME = 1;
    GameModeSelectionDuration_LAPS = 2;
}

enum GameModeSelectionGoBackFrom {
    GameModeSelectionGoBackFrom_UNKNOWN = 0;
    GameModeSelectionGoBackFrom_GARAGE = 1;
    GameModeSelectionGoBackFrom_DEALERSHIP = 2;
    GameModeSelectionGoBackFrom_PAINTSHOP = 3;
    GameModeSelectionGoBackFrom_PARTSHOP = 4;
    GameModeSelectionGoBackFrom_RENTAL = 5;
    GameModeSelectionGoBackFrom_STATS = 6;
    GameModeSelectionGoBackFrom_RESULTS = 7;
    GameModeSelectionGoBackFrom_SPECIAL_EVENTS = 8;
    GameModeSelectionGoBackFrom_DRIVING_ACADEMY = 9;
    GameModeSelectionGoBackFrom_SINGLE_PLAYER = 10;
}

enum GameModeSelectionGridType {
    GameModeSelectionGridType_AUTO = 0;
    GameModeSelectionGridType_CUSTOM = 1;
}

enum GameModeSelectionWeatherBehaviour {
    GameModeSelectionWeatherBehaviour_STATIC = 0;
    GameModeSelectionWeatherBehaviour_DYNAMIC = 1;
}

enum TrackSelectionType {
    TrackSelectionType_NONE = 0;
    TrackSelectionType_CRUISE = 1;
    TrackSelectionType_DRIFT = 2;
    TrackSelectionType_INSTANT_RACE = 4;
    TrackSelectionType_TIME_ATTACK = 8;
    TrackSelectionType_HOT_STINT = 16;
    TrackSelectionType_A_TO_B = 32;
}

enum SpecialEventStatus {
    SpecialEventStatus_DISABLED = 0;
    SpecialEventStatus_ENABLED = 1;
    SpecialEventStatus_DONE = 2;
}
